---
title: "Reproducible Research: Peer Assessment 1"
output: 
  html_document:
    keep_md: true
---
```{r setoptions,echo=TRUE}

```

## Loading and preprocessing the data
Load libraries and delete variables

```{r}
library(plyr)
library(dplyr)
library(data.table)
# library(lubridate)
rm(list=ls())
```
Create data directory (if it does not exist previously) and unzip the .zip data
file in the "data" directory.
```{r}
# Create data folder if it does not exist
if (!file.exists("data")) {
        dir.create("data")
}
# Unzip file in "data" directory
unzip(zipfile = "activity.zip", exdir = "./data")
```

The data frame is created with fread and the data structure and type of 
each variable is checked.
```{r}
# Create a "Data Frame" with "fread"
df <- fread("./data/activity.csv")
head(df)
str(df)
summary(df)
```

## What is mean total number of steps taken per day?
### *Calculate the total number of steps taken per day*
```{r}
# For this part of the assignment, you can ignore the missing values in the dataset.
# Note the use of the '.' function to allow date be used without quoting
df_day <- ddply(df, .(date), summarize, 
                sum = sum(steps, na.rm = TRUE), 
                mean = mean(steps, na.rm = TRUE),
                median = median(steps, na.rm = TRUE)
                )

df_day
```
### *Make a histogram of the total number of steps taken each day*
```{r histogram_01}
hist(df_day$sum,
     main="Histogram of total number of steps taken each day", 
     xlab = "total number of steps taken each day",
     col="#2166AC")

dev.copy(png, file = "figure/hist_steps_day.png")
dev.off()
```
### *Calculate and report the mean and median of the total number of steps taken per day*
```{r}
# Calculate and report the mean and median of the total number 
# of steps taken per day
mean_step_day <- mean(df$steps, na.rm = TRUE)
median_step_day <- median(df$steps, na.rm = TRUE)
```
The **mean** of the total number of steps taken per day 
is **`r mean_step_day`**.


The **median** of the total number of steps taken per day is
**`r median_step_day`**.

## What is the average daily activity pattern?
### Make plot of the 5-minute interval *vs* average number of steps taken
Calculation of average number of steps per 5-minute interval per day
```{r}
# Make a time series plot type = "l" of the 5-minute interval (x-axis) and
# the average number of steps taken, averaged across all days (y-axis)

df_minute <- ddply(df, .(interval), summarize, 
                mean = mean(steps, na.rm = TRUE),
                )

head(df_minute)
```
Time series plot type = "l" of the 5-minute interval (x-axis) and 
the average number of steps taken, averaged across all days (y-axis)

```{r plot_line_mean_interval}
plot(x=df_minute$interval,
     y=df_minute$mean,
     type="l",
     main="Average number of steps per interval", 
     xlab = "5-minute interval",
     ylab = "Average number of steps",
     col="#2166AC",
     frame.plot = FALSE)
dev.copy(png, file = "figure/plot_line_step_interval.png")
dev.off()
```


## Imputing missing values



## Are there differences in activity patterns between weekdays and weekends?
